<div class="mx-auto relative">
  <form [formGroup]="formReceipt" (ngSubmit)="onSubmit()" class="px-2">
    <table
      class="table-auto w-full 2xl:w-2/3 xl:w-2/3 lg:w-2/3 md:w-2/3 sm:w-2/3"
    >
      <thead>
        <tr class="border border-gray-200">
          <td class="w-1/3 text-right py-1 px-2 bg-gray-100">Sinh viên</td>
          <td
            class="
              bg-white
              w-2/3
              text-left
              px-2
              py-1
              text-gray-700
              font-semibold
              relative
            "
          >
            <input
              type="text"
              disabled
              class="
                relative
                border
                rounded-lg
                p-3
                text-sm
                w-full
                focus:outline-none
                input
              "
              [value]="userInfo?.name ? userInfo?.name : ''"
              placeholder="Khách hàng"
            />
            <input
              type="hidden"
              [value]="userInfo?.id ? userInfo?.id : ''"
              formControlName="user_id"
            />
            <span
              (click)="getUserById()"
              class="z-10 h-full absolute w-8 right-2 pt-2 cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-search"
                width="25"
                height="25"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="#000000"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <circle cx="10" cy="10" r="7" />
                <line x1="21" y1="21" x2="15" y2="15" />
              </svg>
            </span>
            <span class="validate">{{ errorMess?.user_id?.[0] }}</span>
          </td>
        </tr>

        <tr class="border border-gray-200">
          <td class="w-1/3 text-right py-1 px-2 bg-gray-100">Ngày thu</td>
          <td
            class="
              bg-white
              w-2/3
              text-left
              px-2
              py-1
              text-gray-700
              font-semibold
            "
          >
            <input
              type="date"
              class="input w-full h-8 rounded-md px-3"
              formControlName="collection_date"
            />
            <span class="validate">{{ errorMess?.collection_date?.[0] }}</span>
          </td>
        </tr>

        <tr class="border border-gray-200">
          <td class="w-1/3 text-right py-1 px-2 bg-gray-100">Tổng tiền</td>
          <td
            class="
              bg-white
              w-2/3
              text-left
              px-2
              py-1
              text-gray-700
              font-semibold
            "
          >
            <input
              type="text"
              placeholder="Tổng tiền"
              class="input w-full h-8 rounded-md px-3"
              formControlName="amount_of_money"
            />
            <span class="validate">{{ errorMess?.amount_of_money?.[0] }}</span>
          </td>
        </tr>

        <tr class="border border-gray-200">
          <td class="w-1/3 text-right py-1 px-2 bg-gray-100">
            Phương thức thanh toán
          </td>
          <td
            class="
              bg-white
              w-2/3
              text-left
              px-2
              py-1
              text-gray-700
              font-semibold
            "
          >
            <select class="input w-full" formControlName="payment_type">
              <option value="Tiền mặt">Tiền mặt</option>
              <option value="Chuyển khoản">Chuyển khoản</option>
            </select>
          </td>
        </tr>
        <tr class="border border-gray-200">
          <td class="w-1/3 text-right py-1 px-2 bg-gray-100">Lý do thu</td>
          <td
            class="
              bg-white
              w-2/3
              text-left
              px-2
              py-1
              text-gray-700
              font-semibold
              relative
            "
          >
            <input
              type="text"
              disabled
              class="relative w-full input"
              [value]="receiptReasonInfo?.label ? receiptReasonInfo?.label : ''"
              placeholder="Lý do thu"
            />
            <input
              type="hidden"
              [value]="receiptReasonInfo?.value ? receiptReasonInfo?.value : ''"
              formControlName="receipt_reason_id"
            />
            <span
              (click)="getReceiptReasonById()"
              class="z-10 h-full absolute w-8 right-2 pt-2 cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-search"
                width="25"
                height="25"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="#000000"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <circle cx="10" cy="10" r="7" />
                <line x1="21" y1="21" x2="15" y2="15" />
              </svg>
            </span>
            <span
              class="validate"
              >{{ errorMess?.receipt_reason_id?.[0] }}</span
            >
          </td>
        </tr>
        <tr class="border border-gray-200">
          <td class="w-1/3 text-right py-1 px-2 bg-gray-100">Ghi chú</td>
          <td
            class="
              bg-white
              w-2/3
              text-left
              px-2
              py-1
              text-gray-700
              font-semibold
            "
          >
            <textarea
              rows="3"
              class="w-full border border-gray-300 rounded-md"
              formControlName="note"
            >
            </textarea>
          </td>
        </tr>
      </thead>
    </table>
    <button
      type="submit"
      class="
        px-4
        mt-2
        bg-main
        text-white
        font-medium
        rounded
        inline-flex
        items-center
      "
    >
      Lưu
    </button>
  </form>
</div>

<app-loading-page *ngIf="isLoading"></app-loading-page>
